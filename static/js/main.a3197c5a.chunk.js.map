{"version":3,"sources":["App.js","index.js"],"names":["makeid","length","result","characters","charactersLength","i","charAt","Math","floor","random","KEY","getCart","storage","JSON","parse","window","getItem","ex","App","useState","setStorage","useReducer","forceRender","cart","useEffect","addEventListener","removeEventListener","className","name","type","value","checked","onChange","currentTarget","onClick","item","quantity","round","sku","newCart","setItem","stringify","addItem","filter","removeItem","map","undefined","rootElement","document","getElementById","createRoot","render"],"mappings":"6IAEA,SAASA,EAAOC,GAKd,IAJA,IAAIC,EAAS,GACTC,EACF,iEACEC,EAAmBD,EAAWF,OACzBI,EAAI,EAAGA,EAAIJ,EAAQI,IAC1BH,GAAUC,EAAWG,OAAOC,KAAKC,MAAMD,KAAKE,SAAWL,IAEzD,OAAOF,EAGT,IAAMQ,EAAM,OAENC,EAAU,SAACC,GACf,GAAgB,cAAZA,EACF,MAAO,GAEP,IACE,OAAOC,KAAKC,MAAMC,OAAOH,GAASI,QAAQN,IAC1C,MAAOO,MA4BE,SAASC,IACtB,MAA8BC,mBAAS,gBAAvC,mBAAOP,EAAP,KAAgBQ,EAAhB,KACA,EAAyBC,sBAAW,iBAAM,MAA1C,mBAAUC,GAAV,WACMC,EAAOZ,EAAQC,IAAY,GA4BjC,OAZAY,qBAAU,WACRF,MACC,CAACV,IAEJY,qBAAU,WAGR,OAFAT,OAAOU,iBAAiB,UAAWH,GAE5B,WACLP,OAAOW,oBAAoB,UAAWJ,MAEvC,IAGD,sBAAKK,UAAU,MAAf,UACE,iCACE,kCACE,uBACEC,KAAK,UACLC,KAAK,QACLC,MAAM,eACNC,QAAqB,iBAAZnB,EACToB,SAAU,gBAAGC,EAAH,EAAGA,cAAH,OAAuBb,EAAWa,EAAcH,UAN9D,kBAUA,kCACE,uBACEF,KAAK,UACLC,KAAK,QACLC,MAAM,iBACNC,QAAqB,mBAAZnB,EACToB,SAAU,gBAAGC,EAAH,EAAGA,cAAH,OAAuBb,EAAWa,EAAcH,UAN9D,uBAWF,sCACA,gCACE,wBAAQI,QApDI,YA7BJ,SAACtB,EAASW,GACxB,IAAMY,EAAO,CACXC,SAAW7B,KAAK8B,MAAsB,IAAhB9B,KAAKE,UAAkB,EAAK,EAClD6B,IAAKtC,EAAO,IAERuC,EAAO,sBAAOhB,GAAP,CAAaY,IAE1B,IACE,OAAOpB,OAAOH,GAAS4B,QAAQ9B,EAAKG,KAAK4B,UAAUF,IACnD,MAAOtB,IAEFN,EAAQC,GAmBb8B,CAAQ9B,EAASW,GACjBD,KAkDI,sBACA,wBAAQY,QAjDO,WACC,IAAhBX,EAAKtB,UApBM,SAACW,EAASW,EAAMe,GACjC,IAAMC,EAAU,YAAIhB,GAAMoB,QAAO,SAACR,GAAD,OAAUA,EAAKG,MAAQA,KAExD,IACEvB,OAAOH,GAAS4B,QAAQ9B,EAAKG,KAAK4B,UAAUF,IAC5C,MAAOtB,IAEFN,EAAQC,GAcbgC,CACEhC,EACAW,EACAA,EAAKhB,KAAK8B,MAAsB,IAAhB9B,KAAKE,UAAkBc,EAAKtB,QAAQqC,KAEtDhB,MA0CI,4BAEF,oCACGC,QADH,IACGA,OADH,EACGA,EAAMsB,KAAI,SAACV,GAAD,OACT,6BACE,8BAAMtB,KAAK4B,UAAUN,OAAMW,EAAW,MAD/BX,EAAKG,aC1GxB,IAAMS,EAAcC,SAASC,eAAe,QAC/BC,qBAAWH,GAEnBI,OACH,cAAC,aAAD,UACE,cAACjC,EAAD,S","file":"static/js/main.a3197c5a.chunk.js","sourcesContent":["  import { useEffect, useReducer, useState } from \"react\";\n\nfunction makeid(length) {\n  var result = \"\";\n  var characters =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  var charactersLength = characters.length;\n  for (var i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n\nconst KEY = \"CART\";\n\nconst getCart = (storage) => {\n  if (storage === \"indexeddb\") {\n    return [];\n  } else {\n    try {\n      return JSON.parse(window[storage].getItem(KEY));\n    } catch (ex) {}\n  }\n};\n\nconst addItem = (storage, cart) => {\n  const item = {\n    quantity: (Math.round(Math.random() * 100) % 5) + 1,\n    sku: makeid(7)\n  };\n  const newCart = [...cart, item];\n\n  try {\n    return window[storage].setItem(KEY, JSON.stringify(newCart));\n  } catch (ex) {}\n\n  return getCart(storage);\n};\n\nconst removeItem = (storage, cart, sku) => {\n  const newCart = [...cart].filter((item) => item.sku !== sku);\n\n  try {\n    window[storage].setItem(KEY, JSON.stringify(newCart));\n  } catch (ex) {}\n\n  return getCart(storage);\n};\n\nexport default function App() {\n  const [storage, setStorage] = useState(\"localStorage\");\n  const [_, forceRender] = useReducer(() => []);\n  const cart = getCart(storage) || [];\n\n  const handleAdd = () => {\n    addItem(storage, cart);\n    forceRender();\n  };\n  const handleRemove = () => {\n    if (cart.length === 0) return;\n    removeItem(\n      storage,\n      cart,\n      cart[Math.round(Math.random() * 100) % cart.length].sku\n    );\n    forceRender();\n  };\n\n  useEffect(() => {\n    forceRender();\n  }, [storage]);\n\n  useEffect(() => {\n    window.addEventListener('storage', forceRender)\n\n    return () => {\n      window.removeEventListener('storage', forceRender)\n    }\n  }, [])\n\n  return (\n    <div className=\"App\">\n      <form>\n        <label>\n          <input\n            name=\"storage\"\n            type=\"radio\"\n            value=\"localStorage\"\n            checked={storage === \"localStorage\"}\n            onChange={({ currentTarget }) => setStorage(currentTarget.value)}\n          />\n          localStorage\n        </label>\n        <label>\n          <input\n            name=\"storage\"\n            type=\"radio\"\n            value=\"sessionStorage\"\n            checked={storage === \"sessionStorage\"}\n            onChange={({ currentTarget }) => setStorage(currentTarget.value)}\n          />\n          sessionStorage\n        </label>\n      </form>\n      <h1>Cart</h1>\n      <div>\n        <button onClick={handleAdd}>Add Item</button>\n        <button onClick={handleRemove}>Remove Item</button>\n      </div>\n      <ul>\n        {cart?.map((item) => (\n          <li key={item.sku}>\n            <pre>{JSON.stringify(item, undefined, 2)}</pre>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement);\n\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n"],"sourceRoot":""}